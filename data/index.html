<!DOCTYPE html>
<html data-ng-app="smoothnacl" data-ng-csp>
<!--
Copyright (c) 2012 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<head>
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="-1">
  <title>SmoothLife</title>
  <link rel="stylesheet" href="jquery-ui-1.9.0.custom.min.css">
  <link rel="stylesheet" href="jquery.miniColors.css">
  <link rel="stylesheet" href="main.css">
  <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
  <script type="text/javascript" src="jquery-ui-1.9.0.custom.js"></script>
  <script type="text/javascript" src="jquery.layout-latest.min.js"></script>
  <script type="text/javascript" src="jquery.masonry.min.js"></script>
  <script type="text/javascript" src="jquery.miniColors.js"></script>
  <script type="text/javascript" src="angular.js"></script>
  <script type="text/javascript" src="controllers.js"></script>
  <script type="text/javascript" src="directives.js"></script>
  <script type="text/javascript" src="app.js"></script>
</head>
<body ng-controller="controller">
  <div class="ui-layout-east">
    <div class="title"><span class="title-bold">Smooth</span>Life</div>
    <div class="tabs">
      <ul>
        <li><a href="#tabs-about">About</a></li>
        <li><a href="#tabs-presets">Patterns</a></li>
        <li><a href="#tabs-colors">Colors</a></li>
        <li><a href="#tabs-advanced">Advanced</a></li>
      </ul>
      <div id="tabs-about">
        <p>
          SmoothLife is an generalization of
          <a href="http://en.wikipedia.org/wiki/Conway's_Game_of_Life">Conway's Game of Life,</a>
          expanded to use real values.
        </p>
        <p>
          The source for this Native Client implementation can be found at
          <a href="http://github.com/binji/smoothnacl">http://github.com/binji/smoothnacl.</a>
        </p>
        <p>
          Stephan Rafler designed and implemented the original Smoothlife algorithm.
          <ul>
            <li>You can find his paper on the algorithm at <a href="http://arxiv.org/pdf/1111.1567v2.pdf">http://arxiv.org/pdf/1111.1567v2.pdf</a>.</li>
            <li>The original source can be found at <a href="http://sourceforge.net/projects/smoothlife">http://sourceforge.net/projects/smoothlife</a>.</li>
          </ul>
        </p>
        <span id="fps">FPS: {{fps}}</span>
        <p>
          <button id="takeScreenshot" data-ng-click="takeScreenshot()">
            Screenshot
          </button>
          <img ng-src="{{screenshotUrl}}"></img>
        </p>
      </div>
      <div id="tabs-presets" data-ng-controller="presetController">
        <form id="savePreset" class="setting-row">
          <input type="text" id="savePresetName" placeholder="Save name"
              data-ng-model="addPresetName">
          <button id="savePresetButton" data-ng-click="addPreset()">
            Save
          </button>
        </form>
        <div id="presetMenu" data-masonry data-model="presets">
          <preset data-ng-repeat="preset in presets"
              data-ng-click="setPreset($index)"></preset>
        </div>
        <!-- ugly hack for copying current presets -->
        <textarea id="presetTextarea"></textarea>
      </div>
      <div id="tabs-colors">
        <div class="setting-row">
          <color-gradient id="gradient" data-model="palette"></color-gradient>
        </div>
        <div id="colors" class="palette">
          <buttonset-row class="buttonset-center"
              data-model="palette.gradientType"
              data-values="linear repeat"></buttonset-row>
          <colorstop
              data-ng-repeat="colorstop in palette.colorstops"
              data-model="colorstop"></colorstop>
        </div>
        <div class="setting-row no-border-bottom">
          <button class="plus-button-div" data-ng-click="addColorstop()">
            <span class="ui-icon ui-icon-plusthick"></span>
          </button>
        </div>
      </div>
      <div id="tabs-advanced">
        <div class="draw-options">
          <buttonset-row data-label="view"
              data-model="drawOptions.view"
              data-values="simulation smoother disc ring"></buttonset-row>
        </div>
        <div class="kernel">
          <slider-row data-label="disc radius"
              data-model="kernel.discRadius"
              data-min="0" data-max="50" data-prec="1"
              title="Radius of the 'disc' part of a cell.">
          </slider-row>
          <slider-row data-label="ring radius"
              data-model="kernel.ringRadius"
              data-min="0" data-max="50" data-prec="1"
              title="Radius of the 'ring' part of a cell, surrounding the disc.">
          </slider-row>
          <slider-row data-label="anti-alias radius"
              data-model="kernel.antiAliasRadius"
              data-min="0" data-max="50" data-prec="1"
              title="The anti-aliasing radius. The larger this value, the more blended the region between the disc and the ring.">
          </slider-row>
        </div>
        <div class="smoother">
          <buttonset-row data-label="timestep"
              data-model="smoother.timestep"
              data-values="discrete smooth1 smooth2 smooth3"></buttonset-row>
          <slider-row data-label="dt"
              data-model="smoother.dt"
              data-min="0" data-max="1" data-prec="3"></slider-row>
          <slider-row data-label="b1"
              data-model="smoother.b1"
              data-min="0" data-max="1" data-prec="3"></slider-row>
          <slider-row data-label="d1"
              data-model="smoother.d1"
              data-min="0" data-max="1" data-prec="3"></slider-row>
          <slider-row data-label="b2"
              data-model="smoother.b2"
              data-min="0" data-max="1" data-prec="3"></slider-row>
          <slider-row data-label="d2"
              data-model="smoother.d2"
              data-min="0" data-max="1" data-prec="3"></slider-row>
          <buttonset-row data-label="sigmoid mode"
              data-model="smoother.sigmoidMode"
              data-values="mode1 mode2 mode3 mode4"></buttonset-row>
          <buttonset-row data-label="sigmoid"
              data-model="smoother.sigmoid"
              data-values="hard linear hermite sin smooth"></buttonset-row>
          <buttonset-row data-label="mix"
              data-model="smoother.mix"
              data-values="hard linear hermite sin smooth"></buttonset-row>
          <slider-row data-label="sn"
              data-model="smoother.sn"
              data-min="0" data-max="1" data-prec="3"></slider-row>
          <slider-row data-label="sm"
              data-model="smoother.sm"
              data-min="0" data-max="1" data-prec="3"></slider-row>
        </div>
      </div>
    </div>
  </div>
  <div class="ui-layout-center">
    <div id="listener" data-nacl-module
        msg1="{{getKernelMessage()}}"
        msg2="{{getSmootherMessage()}}"
        msg3="{{getPaletteMessage()}}"
        msg4="Clear:0"
        msg5="Splat"
        msg6="SetRunOptions:simulation,run"
        msg7="SetDrawOptions:simulation">
    </div>
    <div id="buttonBar">
      <div>
        <input type="submit" id="clear" value="Clear">
        <input type="submit" id="splat" value="Splat">
      </div>
    </div>
  </div>
</body>
</html>
